<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DICTIONARY</title>
</head>
<body>
    <div class="container-fluid">
        <div class="container bg-light p-5">
            <div class="row justify-content-center ">
                <!-- <div class="col-md-4 ">
                    <div class="inner-col">

                    </div>
                </div> -->

                <div class="col-md-5 col-sm-10 rounded-top  pill">
                    <div class="inner-col dic-body">
                        <div class="card dic-body">
                            <div class="card-header  bg-info">
                                <div class="search">
                                    <form action="" method="" id="search_form">
                                        <div class="input-group">
                                          <input type="text" name="search_text" class="form-control"  id="search_text">
                                         <button id="sub" class="input-group-text" type="submit"> <i class="fas fa-search"></i></button>
                                        </div>
                                    </form>
                                </div>
                                <h3 class="text-center" class="word" id="word"></h3>
                                <p id="title"></p>
                                <p id="message"></p>
                                
                            </div>
                            <div class="card-content  p-3">
                                <div id="display">
                                    <!-- <button id="play"></button> -->
                                    <span id="text"></span>
                                    <span id="part"></span>
                                     <span id="phonetic"></span>
                                     <span id="def"></span>
                                    <span id="example"></span>
                                    <span id="synonyms"></span>
                                    <span id="antonmys"></span>
                                </div>


          
                                <!-- <p class="phonetic"> hel-lo  || hael <i class="far fa-volume-down text-danger"></i>, he-\</p>
                               <p id="plura"> <i> plural</i> <b>Hellos</b> </p>
                               <h3 id="defination">Defination</h3>
                               <p id="meaning">An expression  or gesture of greeting - usedAn expression  or gesture of greeting - used</p>
                               <h3>Synonyms & Antonyms</h3>
                               <strong> Synonyms</strong>
                               <p id="synonyms">greeting, salutation</p>
                               <strong> Antonyms</strong>
                               <p id="antonmys">greeting, salutation</p>
                               <h3>Examples</h3>
                               <p id="example">They Welcome with <i>hello</i></p>
                               <h3>first Known Use</h3>
                               <p id="history">1984 </p> -->

                            </div>
                            <div class="card-footer"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <script src="Js/script.js" type="javascript"></script> -->
    <script>
        window.addEventListener("load", (event) => {
    const statusDisplay = document.getElementById("status");
    statusDisplay.textContent = navigator.onLine ? "Online" : "OFFline";
    console.log(statusDisplay);
});

function getid(id, display) {
    id = document.getElementById(id)
    id.innerHTML = display
}

let no = 0;

let p = '<audio  control class=""> <source src="images/here.mp3" type="audio/ogg">  <source src="images/here.mp3" type="audio/mpeg"> </audio>'
function play(link, id) {
    id = document.getElementById(id);
    id.innerHTML = '<audio  style="display:none" controls autoplay  > <source src="' + link + ' " type="audio/ogg">  <source src="' + link + '" type="audio/mpeg"> </audio>'
}

// element
let span = "";
let sub = document.getElementById('sub');
// form data
let form = document.getElementById("search_form");
let text = form['search_text']
console.log(text.value)
async function dictionary(input) {
    let url = 'https://api.dictionaryapi.dev/api/v2/entries/en/' + input.value;
    let response = await fetch(url)
    let data = await response.json()
        .catch(function (error) {
            console.log(error);
        })


    // console.log(url)
    getid('word', text.value)
    // Check weather the input word is Available
    if (data.length == 0 || data.length == undefined) {
        let message = data['message'];
        let title = data['title']
        getid('message', message);
        getid('title', title);
    } else {
        for (let i = 0; i < data.length; i++) {

            span += "<p>" + data[i]['word'] + "<br>" + "<span> <b> " + data[i]['meanings'][0]['partOfSpeech'] + "</b><br>";
            getid('text', span)
            for (let p = 0; p < data[i]['phonetics'].length; p++) {
                if ('text' in data[i]['phonetics'][p] && 'audio' in data[i]['phonetics'][p]) {
                    // span += "<span>" + data[i]['phonetics'][p]['text'] + "  " +  '<i class="fas fa-volume-up"></i>'  + "  " + "</span>"         
                    if (data[i]['phonetics'][p]['text'] != ' ') {
                        span += "<span class='text-danger'>" + data[i]['phonetics'][p]['text'] + "  "
                        if (data[i]['phonetics'][p]['audio'] != '') {
                            span += '<button onclick=' + ' "play(' + " ' " + data[i]["phonetics"][p]["audio"] + " ' " + " ,'play'" + '  )" ' +
                                'class="btn btn-light btn-sm fas fa-volume-up" id="play" > </button>' + "  " + "</span>"
                         }
                    }
                }
            } // Phonetics loop
            for (let m = 0; m < data[i]['meanings'].length; m++) {
                span += "<br> <b>" + data[i]['meanings'][m]['partOfSpeech'] + "</b>"
                for (let d = 0; d < data[i]['meanings'][m]['definitions'].length; d++) {
                    no++
                    span += "<br> <b class='text-info'>" + no + " Defination </b><br>" + '' + " <span>" + data[i]['meanings'][m]['definitions'][d]['definition'] + "</span> "
                    if ('example' in data[i]['meanings'][m]['definitions'][d]) {
                        span += "<br><br> <span> <i> Example: " + data[i]['meanings'][m]['definitions'][d]['example'] + " </i></span> <br>"
                    }
                }  // Defination for

                if ('synonyms' in data[i]['meanings'][m]) {

                    if (data[i]['meanings'][m]['synonyms'].length !=0) {
                        let synonmys = data[i]['meanings'][m]['synonyms'].join(' , ');
                        span += "<br><br> <span> <b>   Synonyms: <br>  </b> " + synonmys + " </i></span> <br>"

                    }
                }

                //  for Antonyms
                if ('antonyms' in data[i]['meanings'][m]) {
                    if (data[i]['meanings'][m]['antonyms'].length != 0) {
                           let antonyms = data[i]['meanings'][m]['antonyms']
                        antonyms.join(', ')
                        span += "<br><br> <span> <b>   Antonmys: <br>  </b> " + antonyms + " </i></span> <br>"
                    }
                }
            } //meanings loo

            span += "</p>" // Closing of first p tag

        } // i for
        // getid('display', span)

    } // else (if word found)

}

// console.log(text);
form.addEventListener('submit', (e) => {
    e.preventDefault();
    dictionary(text);

    // sub.addEventListener('click', () => {
    //     span = '';
    //     window.location.reload()
    //     //   dictionary(text);
    // })
    // fetch("https://api.dictionaryapi.dev/api/v2/entries/en/"+text.value, {
    //     method: "GET"
    // })
    // .then(response =>{
    //     return response.json();
    // })

    // .then(data =>{
    // console.log(data.length);

    // for(let i=0; data[0].array.length; i++){

    // }
    // console.log(data);
}) //then

// })


    </script>
</body>
</html>